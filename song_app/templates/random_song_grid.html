{% extends "base.html" %}

{% block head %}
{{super()}}
<script>
$(document).ready(function(){
   $('.menu .item').tab();
   $('.ui.rating').rating({
    maxRating: 5
   });
   $('.ui.rating')
  .rating('setting', 'onRate', function(value) {
      var song_id = this.dataset.song_id;
      console.log(song_id);
      console.log(value);
      const url = "rate_song"
      $.get(url,{song_id:song_id,rating:value});
  });
});



</script>

{% endblock head %}
{% block content %}
<h1>Songs </h1>
<div class="ui three cards">
    {% for song in songs%}
    <a class="ui raised card" href="{{url_for('songs.play_song',song_id=song.id)}}">
        <div class="content">
            <div class="header">
                {{song.title}}
            </div>
            <div class="meta">
                {{song.artist}}
            </div>
            <div class="description">
                <table>
                    <tr>
                        <td>Play Count:</td>
                        <td>{{song.play_count}}</td>
                    </tr>
                    {% if song.skill_level is number%}
                    <tr>
                        <td>Skill:</td>
                        <td>

                            <div class="ui star rating" data-song_id="{{song.id}}" data-rating="{{song.skill_level|round|int}}"
                                 data-max-rating="5"></div>

                        </td>
                    </tr>
                    {%endif%}
                </table>
            </div>
        </div>
        {% if song.notes%}
        <div class="extra content">
            Notes:
            <p>{{song.notes}}</p>
        </div>
        {% endif %}

    </a>
    {% endfor %}
</div>
<br>
<a href="{{ url_for('songs.random_songs') }}" class="ui primary fluid button">Reshuffle</a>

{% endblock content %}